"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3353],{3353:(C,d,l)=>{l.r(d),l.d(d,{NewsectionPageModule:()=>y});var m=l(177),a=l(4341),s=l(8974),g=l(1626),h=l(7570),f=l(467),e=l(4438),v=l(5721),p=l(3366);const b=[{path:"",component:(()=>{var i;class c{constructor(t,o,n,r,N,w,F){this._router=t,this.route=o,this.http=n,this.formBuilder=r,this.authService=N,this.apiService=w,this.alertController=F,this.disableButton=!1,this.edit=!1,this.section=null,this.searchQuery="",this.sectionForm=this.formBuilder.group({title:["",[a.k0.required]],description:[""]})}ngOnInit(){this._router.events.subscribe(t=>{t instanceof h.wF&&"/newsection"===t.url&&(this.disableButton=!1,this.sectionForm.reset())}),this.route.params.subscribe(t=>{const o=t.id;o&&(this.edit=!0,this.loadSection(o))})}ionChange(t){console.log("search event: ",t.detail.value),this.searchQuery="",this._router.navigate(["/search",t.detail.value])}presentAlert(t){var o=this;return(0,f.A)(function*(){yield(yield o.alertController.create({header:"Alert",message:t,buttons:["OK"]})).present()})()}saveSection(){var t,o;if(this.disableButton=!0,this.sectionForm.invalid)return console.log("sectionForm is invalid"),null!==(t=this.sectionForm.get("title"))&&void 0!==t&&t.errors&&(console.log("Invalid title"),this.presentAlert("Invalid Title")),void(this.disableButton=!1);this.edit?this.apiService.put_with_id("sections",(null===(o=this.section)||void 0===o?void 0:o.id.toString())||"",this.sectionForm.value).subscribe({next:n=>{var r;console.log("Successful Response:",n),this.goToSection((null===(r=this.section)||void 0===r?void 0:r.id.toString())||"")},error:n=>{console.error("unsuccessful",n),400===n.status&&"Section title already exists"===n.error.error&&this.presentAlert("Section title already exists"),this.disableButton=!1},complete:()=>{}}):this.apiService.post("sections",this.sectionForm.value).subscribe({next:n=>{var r;console.log(this.sectionForm.get("title")),console.log(null===(r=this.sectionForm.get("title"))||void 0===r?void 0:r.errors),console.log("Successful Response:",n),this.goToSection(n.section_id)},error:n=>{console.error("unsuccessful",n),400===n.status&&"Section title already exists"===n.error.error&&this.presentAlert("Section title already exists"),this.disableButton=!1},complete:()=>{}})}loadSection(t){this.apiService.get_with_id("sections",t.toString()).subscribe({next:o=>{console.log("Section:",o.section),this.section=o.section,this.sectionForm.patchValue(this.section)},error:o=>{console.error("Error getting section details:",o)},complete:()=>{}})}cancel(){var t;this.disableButton=!1,this.sectionForm.reset(),this.edit?this.goToSection((null===(t=this.section)||void 0===t?void 0:t.id.toString())||""):this.goHome()}goToSection(t){this._router.navigate(["/section",t])}goToAccount(){this._router.navigate(["/useraccount"])}goHome(){this._router.navigate(["/home"])}}return(i=c).\u0275fac=function(t){return new(t||i)(e.rXU(h.Ix),e.rXU(h.nX),e.rXU(g.Qq),e.rXU(a.ok),e.rXU(v.u),e.rXU(p.G),e.rXU(s.hG))},i.\u0275cmp=e.VBU({type:i,selectors:[["app-newsection"]],decls:26,vars:5,consts:[[3,"translucent"],["slot","start"],["enterkeyhint","search","debounce","1000",1,"search",3,"ngModelChange","ionChange","ngModel"],[3,"fullscreen"],["collapse","condense"],["size","large"],["color","primary",1,"header"],[1,"ion-text-center"],[3,"ngSubmit","formGroup"],["formControlName","title","label","Title","labelPlacement","floating","type","text"],["formControlName","description","label","Description","labelPlacement","floating","type","text"],["type","submit",3,"disabled"],[3,"click"]],template:function(t,o){1&t&&(e.j41(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1),e.nrm(3,"ion-menu-button"),e.k0s(),e.j41(4,"ion-searchbar",2),e.mxI("ngModelChange",function(r){return e.DH7(o.searchQuery,r)||(o.searchQuery=r),r}),e.bIt("ionChange",function(r){return o.ionChange(r)}),e.k0s()()(),e.j41(5,"ion-content",3)(6,"ion-header",4)(7,"ion-toolbar")(8,"ion-title",5),e.EFF(9,"New Section"),e.k0s()()(),e.j41(10,"ion-card")(11,"ion-card-header",6)(12,"ion-card-title",7),e.EFF(13,"Add New Section"),e.k0s()(),e.j41(14,"ion-card-content")(15,"form",8),e.bIt("ngSubmit",function(){return o.saveSection()}),e.j41(16,"ion-list")(17,"ion-item"),e.nrm(18,"ion-input",9),e.k0s(),e.j41(19,"ion-item"),e.nrm(20,"ion-input",10),e.k0s()(),e.nrm(21,"br"),e.j41(22,"ion-button",11),e.EFF(23,"Save"),e.k0s(),e.j41(24,"ion-button",12),e.bIt("click",function(){return o.cancel()}),e.EFF(25,"Cancel"),e.k0s()()()()()),2&t&&(e.Y8G("translucent",!0),e.R7$(4),e.R50("ngModel",o.searchQuery),e.R7$(),e.Y8G("fullscreen",!0),e.R7$(10),e.Y8G("formGroup",o.sectionForm),e.R7$(7),e.Y8G("disabled",o.disableButton))},dependencies:[a.qT,a.BC,a.cb,a.vS,a.j4,a.JD,s.Jm,s.QW,s.b_,s.I9,s.ME,s.tN,s.W9,s.eU,s.$w,s.uz,s.nf,s.MC,s.S1,s.BC,s.ai,s.Gw],styles:[".header[_ngcontent-%COMP%]{font-family:Yeseva One,serif;font-weight:400;font-style:normal}"]}),c})()}];let S=(()=>{var i;class c{}return(i=c).\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.$C({type:i}),i.\u0275inj=e.G2t({imports:[h.iI.forChild(b),h.iI]}),c})(),y=(()=>{var i;class c{}return(i=c).\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.$C({type:i}),i.\u0275inj=e.G2t({imports:[m.MD,a.YN,a.X1,s.bv,S,g.q1]}),c})()}}]);