"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[513],{513:(C,d,r)=>{r.r(d),r.d(d,{SearchPageModule:()=>P});var h=r(177),p=r(4341),o=r(8974),l=r(7570),m=r(613),e=r(4438),_=r(3366);const g=()=>[];function S(s,n){1&s&&(e.j41(0,"ion-select-option",20),e.EFF(1,"Time to Make (Shortest First)"),e.k0s())}function f(s,n){1&s&&(e.j41(0,"ion-select-option",21),e.EFF(1,"Time to Make (Longest First)"),e.k0s())}function T(s,n){1&s&&(e.j41(0,"ion-item",8),e.EFF(1," No sections found. "),e.k0s())}function k(s,n){1&s&&(e.j41(0,"ion-item",8),e.EFF(1," No recipes found. "),e.k0s())}function R(s,n){if(1&s){const c=e.RV6();e.j41(0,"ion-item",24),e.bIt("click",function(){const t=e.eBV(c).$implicit,a=e.XpG(2);return e.Njj(a.goToResult(t.id.toString()))}),e.j41(1,"ion-label"),e.EFF(2),e.k0s()()}if(2&s){const c=n.$implicit;e.R7$(2),e.JRh(c.title)}}function b(s,n){if(1&s&&(e.j41(0,"ion-list",22),e.DNE(1,R,3,1,"ion-item",23),e.k0s()),2&s){const c=e.XpG();e.R7$(),e.Y8G("ngForOf",c.sortedRecipes)}}function F(s,n){if(1&s){const c=e.RV6();e.j41(0,"ion-item",24),e.bIt("click",function(){const t=e.eBV(c).$implicit,a=e.XpG(2);return e.Njj(a.goToResult(t.id.toString()))}),e.j41(1,"ion-label"),e.EFF(2),e.k0s()()}if(2&s){const c=n.$implicit;e.R7$(2),e.JRh(c.title)}}function y(s,n){if(1&s&&(e.j41(0,"ion-list",22),e.DNE(1,F,3,1,"ion-item",23),e.k0s()),2&s){const c=e.XpG();e.R7$(),e.Y8G("ngForOf",c.sortedSections)}}const M=[{path:"",component:(()=>{var s;class n{constructor(i,t,a){this._router=i,this.route=t,this.apiService=a,this.keyword="",this.selectedSortingOption="dateCreatedDesc",this.recipes=[],this.sortedRecipes=[],this.sections=[],this.sortedSections=[],this.searchType="recipes"}ngOnInit(){this.route.params.subscribe(i=>{this.keyword=i.keyword,this.loadResults(this.keyword)})}loadResults(i){this.apiService.get_all("search",`?keyword=${i}`).subscribe({next:t=>{console.log("Results:",t),this.recipes=t.recipes,this.sections=t.sections,this.sort()},error:t=>{console.error("Error getting search results:",t)},complete:()=>{}})}toggleSearchType(){this.searchType="recipes"===this.searchType?"sections":"recipes",this.sort()}goToResult(i){"recipes"===this.searchType?this._router.navigate(["/recipe",i]):"sections"===this.searchType&&this._router.navigate(["/section",i])}sort(){"recipes"===this.searchType?this.sortRecipes():this.sortSections()}sortRecipes(){switch(console.log("Sorting recipes..."),this.selectedSortingOption){case"alphabetAsc":this.sortedRecipes=this.recipes.slice().sort((i,t)=>i.title.localeCompare(t.title));break;case"alphabetDesc":this.sortedRecipes=this.recipes.slice().sort((i,t)=>t.title.localeCompare(i.title));break;case"dateCreatedAsc":this.sortedRecipes=this.recipes.slice().sort((i,t)=>new Date(i.date).getTime()-new Date(t.date).getTime());break;case"dateCreatedDesc":this.sortedRecipes=this.recipes.slice().sort((i,t)=>new Date(t.date).getTime()-new Date(i.date).getTime());break;case"timeToMakeAsc":this.sortedRecipes=this.recipes.slice().sort((i,t)=>this.calculateTimeInMinutes(i.time,i.time_unit)-this.calculateTimeInMinutes(t.time,t.time_unit));break;case"timeToMakeDesc":this.sortedRecipes=this.recipes.slice().sort((i,t)=>this.calculateTimeInMinutes(t.time,t.time_unit)-this.calculateTimeInMinutes(i.time,i.time_unit));break;default:this.sortedRecipes=[...this.recipes]}console.log("Sorted recipes:",this.sortedRecipes)}sortSections(){switch(console.log("Sorting sections..."),this.selectedSortingOption){case"alphabetAsc":this.sortedSections=this.sections.slice().sort((i,t)=>i.title.localeCompare(t.title));break;case"alphabetDesc":this.sortedSections=this.sections.slice().sort((i,t)=>t.title.localeCompare(i.title));break;case"dateCreatedAsc":this.sortedSections=this.sections.slice().sort((i,t)=>new Date(i.date).getTime()-new Date(t.date).getTime());break;case"dateCreatedDesc":this.sortedSections=this.sections.slice().sort((i,t)=>new Date(t.date).getTime()-new Date(i.date).getTime());break;default:this.sortedSections=[...this.sections]}console.log("Sorted sections:",this.sortedSections)}calculateTimeInMinutes(i,t){return t===m.y.HOURS?60*i:i}}return(s=n).\u0275fac=function(i){return new(i||s)(e.rXU(l.Ix),e.rXU(l.nX),e.rXU(_.G))},s.\u0275cmp=e.VBU({type:s,selectors:[["app-search"]],decls:35,vars:13,consts:[[3,"translucent"],["slot","start"],["color","primary"],["enterkeyhint","search",1,"search"],[3,"fullscreen"],["collapse","condense"],["size","large"],["color","primary",1,"header"],[1,"ion-text-center"],[2,"min-width","300",3,"click"],[2,"min-width","400px"],["interface","popover","label","Sort By:","label-placement","floating",3,"ngModelChange","ionChange","ngModel"],["value","alphabetAsc"],["value","alphabetDesc"],["value","dateCreatedAsc"],["value","dateCreatedDesc"],["value","timeToMakeAsc",4,"ngIf"],["value","timeToMakeDesc",4,"ngIf"],["class","ion-text-center",4,"ngIf"],["class","result-list",4,"ngIf"],["value","timeToMakeAsc"],["value","timeToMakeDesc"],[1,"result-list"],["button","",3,"click",4,"ngFor","ngForOf"],["button","",3,"click"]],template:function(i,t){1&i&&(e.j41(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1),e.nrm(3,"ion-menu-button",2),e.k0s(),e.nrm(4,"ion-searchbar",3),e.k0s()(),e.j41(5,"ion-content",4)(6,"ion-header",5)(7,"ion-toolbar")(8,"ion-title",6),e.EFF(9,"search"),e.k0s()()(),e.j41(10,"ion-card")(11,"ion-card-header",7)(12,"ion-card-title",8),e.EFF(13),e.k0s()(),e.j41(14,"ion-card-content")(15,"ion-row")(16,"ion-button",9),e.bIt("click",function(){return t.toggleSearchType()}),e.EFF(17),e.k0s(),e.j41(18,"ion-item",10)(19,"ion-select",11),e.mxI("ngModelChange",function(u){return e.DH7(t.selectedSortingOption,u)||(t.selectedSortingOption=u),u}),e.bIt("ionChange",function(){return t.sort()}),e.j41(20,"ion-select-option",12),e.EFF(21,"Alphabetically (A-Z)"),e.k0s(),e.j41(22,"ion-select-option",13),e.EFF(23,"Alphabetically (Z-A)"),e.k0s(),e.j41(24,"ion-select-option",14),e.EFF(25,"Date Created (Oldest First)"),e.k0s(),e.j41(26,"ion-select-option",15),e.EFF(27,"Date Created (Newest First)"),e.k0s(),e.DNE(28,S,2,0,"ion-select-option",16)(29,f,2,0,"ion-select-option",17),e.k0s()()(),e.nrm(30,"br"),e.DNE(31,T,2,0,"ion-item",18)(32,k,2,0,"ion-item",18)(33,b,2,1,"ion-list",19)(34,y,2,1,"ion-list",19),e.k0s()()()),2&i&&(e.Y8G("translucent",!0),e.R7$(5),e.Y8G("fullscreen",!0),e.R7$(8),e.SpI(" Search Results for ",t.keyword," "),e.R7$(4),e.SpI(" ","recipes"===t.searchType?"Show Sections":"Show Recipes"," "),e.R7$(2),e.R50("ngModel",t.selectedSortingOption),e.R7$(9),e.Y8G("ngIf","recipes"===t.searchType),e.R7$(),e.Y8G("ngIf","recipes"===t.searchType),e.R7$(2),e.Y8G("ngIf","recipes"===t.searchType&&t.sortedRecipes===e.lJ4(11,g)),e.R7$(),e.Y8G("ngIf","sections"===t.searchType&&t.sortedSections===e.lJ4(12,g)),e.R7$(),e.Y8G("ngIf","recipes"===t.searchType),e.R7$(),e.Y8G("ngIf","sections"===t.searchType))},dependencies:[h.Sq,h.bT,p.BC,p.vS,o.Jm,o.QW,o.b_,o.I9,o.ME,o.tN,o.W9,o.eU,o.uz,o.he,o.nf,o.MC,o.ln,o.S1,o.Nm,o.Ip,o.BC,o.ai,o.Je,o.Gw]}),n})()}];let I=(()=>{var s;class n{}return(s=n).\u0275fac=function(i){return new(i||s)},s.\u0275mod=e.$C({type:s}),s.\u0275inj=e.G2t({imports:[l.iI.forChild(M),l.iI]}),n})(),P=(()=>{var s;class n{}return(s=n).\u0275fac=function(i){return new(i||s)},s.\u0275mod=e.$C({type:s}),s.\u0275inj=e.G2t({imports:[h.MD,p.YN,o.bv,I]}),n})()}}]);