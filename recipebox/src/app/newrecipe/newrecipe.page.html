<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-menu-button></ion-menu-button>
    </ion-buttons>
    <img button (click)="goHome()" alt="logo" style="width:180px;height:100px;" src="assets/icon/recipieboxlogolong.png" />
    <ion-searchbar class="search" enterkeyhint="search"></ion-searchbar>
  </ion-toolbar>
</ion-header>


<ion-content [fullscreen]="true">
  <ion-header collapse="condense">
    <ion-toolbar>
      <ion-title size="large">New Recipe</ion-title>
    </ion-toolbar>
  </ion-header>

  <ion-card>
    <ion-card-header class="header"  color="primary">
      <ion-card-title class="ion-text-center">Add New Recipe</ion-card-title>
    </ion-card-header>

    <ion-card-content>
      <form [formGroup]="recipeForm" (ngSubmit)="saveRecipe()">
        <ion-list>
          <ion-item>
            <ion-label>Pin Recipe</ion-label>
            <ion-checkbox formControlName="pinned" (ionChange)="updatePinned($event)"></ion-checkbox>
          </ion-item>

          <ion-item>
            <ion-label position="floating">Title</ion-label>
            <ion-input formControlName="title" type="text"></ion-input>
          </ion-item>

          <ion-item>
            <ion-label position="floating">Time</ion-label>
            <ion-input formControlName="time" type="text"></ion-input>
          </ion-item>

          <ion-item>
            <ion-label position="floating">Time Unit</ion-label>
            <ion-input formControlName="time_unit" type="text"></ion-input>
          </ion-item>




          <!-- Ingredients -->
          <div formArrayName="ingredients">
            <ion-item *ngFor="let ingredient of ingredientsArray.controls; let i = index" [formGroupName]="i">
              <ion-input label="Ingredient" formControlName="name" type="text"></ion-input>
              <ion-input label="Amount" formControlName="amount" type="text"></ion-input>
              <ion-input label="Unit" formControlName="amount_unit" type="text"></ion-input>

              <ion-button (click)="removeIngredient(i)" style="font-size: 25px" fill="clear">-</ion-button>

            </ion-item>
            <ion-button (click)="addIngredient()" expand="full">Add Ingredient</ion-button>
          </div>


          <!-- Directions-->
          <div formArrayName="directions">
            <ion-item *ngFor="let direction of directionsArray.controls; let i = index" [formGroupName]="i">
              <ion-input label="Description" formControlName="description" type="text"></ion-input>

              <ion-button (click)="removeDirection(i)" style="font-size: 25px" fill="clear">-</ion-button>

            </ion-item>
            <ion-button (click)="addDirection()" expand="full">Add Direction</ion-button>

          </div>

          <div formGroupName="section_checkbox">
            <ion-item>
              <ion-label position="floating">Sections</ion-label>
              <ion-select formControlName="section_ids" multiple="true" (ionChange)="updateSectionIds($event)">
                <ion-select-option *ngFor="let section of sections" [value]="section.id">{{ section.title }}</ion-select-option>
              </ion-select>
            </ion-item>
          </div>

        </ion-list>

        <!-- maybe -->
        <br>

        <ion-button type="submit" expand="block">Save</ion-button>
        <ion-button (click)="goHome()" expand="block">Cancel</ion-button>
      </form>
    </ion-card-content>
  </ion-card>
</ion-content>



